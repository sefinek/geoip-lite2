const fs=require("node:fs"),path=require("node:path"),FSWatcher={};function makeFsWatchFilter(t,e,n,o,c){let i=null;function a(){i=null,c()}"function"==typeof o&&(c=o,o=n,n=null),FSWatcher[t]&&stopWatching(t),FSWatcher[t]=fs.watch(e,(function(t,c){if(!c)return;const s=path.join(e,c);n&&n!==c||fs.exists(s,(function(t){t&&(null!==i&&(clearTimeout(i),i=null),i=setTimeout(a,o))}))}))}function stopWatching(t){FSWatcher[t].close()}module.exports.makeFsWatchFilter=makeFsWatchFilter,module.exports.stopWatching=stopWatching;