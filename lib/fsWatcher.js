const fs=require("node:fs"),path=require("node:path"),FSWatcher={};function makeFsWatchFilter(name,directory,filename,cooldownDelay,callback){let cooldownId=null;function timeoutCallback(){cooldownId=null;callback()}function onWatchEvent(event,changedFile){if(!changedFile){return}const filePath=path.join(directory,changedFile);if(!filename||filename===changedFile){fs.exists(filePath,function onExists(exists){if(!exists)return;if(cooldownId!==null){clearTimeout(cooldownId);cooldownId=null}cooldownId=setTimeout(timeoutCallback,cooldownDelay)})}}if(typeof cooldownDelay==="function"){callback=cooldownDelay;cooldownDelay=filename;filename=null}if(FSWatcher[name]){stopWatching(name)}FSWatcher[name]=fs.watch(directory,onWatchEvent)}function stopWatching(name){FSWatcher[name].close()}module.exports.makeFsWatchFilter=makeFsWatchFilter;module.exports.stopWatching=stopWatching;