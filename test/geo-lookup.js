const t=require('assert');const o=+new Date;const n=require('../lib/geoip.js');const e=+new Date;if(process.argv.length>2){console.dir(n.lookup(process.argv[2]));const t=+new Date;console.log('Startup: %dms, exec: %dms',e-o,t-e);process.exit(1)}const r=[];let a;const s=3e4;const d=[];let i;const h=+new Date;for(let o=0;o<s;o++){if(o%2===0){a=Math.round(Math.random()*4278190080+16777215)}else{a='2001:'+Math.round(Math.random()*65535).toString(16)+':'+Math.round(Math.random()*65535).toString(16)+':'+Math.round(Math.random()*65535).toString(16)+':'+Math.round(Math.random()*65535).toString(16)+':'+Math.round(Math.random()*65535).toString(16)+':'+Math.round(Math.random()*65535).toString(16)+':'+Math.round(Math.random()*65535).toString(16)+''}i=n.lookup(a);if(i===null){d.push(a);continue}r.push([a,i]);t.ok(n.cmp(a,i.range[0])>=0,'Problem with '+n.pretty(a)+' < '+n.pretty(i.range[0]));t.ok(n.cmp(a,i.range[1])<=0,'Problem with '+n.pretty(a)+' > '+n.pretty(i.range[1]))}const c=+new Date;console.log('Found %d (%d/%d) ips in %dms (%s ip/s) (%sÎ¼s/ip)',s,r.length,d.length,c-h,(s*1e3/(c-h)).toFixed(3),((c-h)*1e3/s).toFixed(0));console.log('Took %d ms to startup',e-o);