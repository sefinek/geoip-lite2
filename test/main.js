const t=require('assert');const o=require('../lib/geoip.js');describe('GeoIP2',(function(){describe('#testLookup()',(function(){it('should return data about IPv4',(function(){const u='1.1.1.1';const n=o.lookup(u);t.ok(n)}));it('should return data about IPv6',(function(){const u='2606:4700:4700::64';const n=o.lookup(u);t.ok(n)}))}));describe('#testDataIP4()',(function(){it('should match data for IPv4 - US',(function(){const u=o.lookup('72.229.28.185');t.strictEqual(u.range!==undefined,true);t.strictEqual(u.country,'US');t.strictEqual(u.region,'NY');t.strictEqual(u.eu,'0');t.strictEqual(u.timezone,'America/New_York');t.strictEqual(u.city,'New York');t.ok(u.ll);t.strictEqual(u.metro,501);t.strictEqual(u.area,5)}));it('should match data for IPv4 - JP',(function(){const u=o.lookup('210.138.184.59');t.strictEqual(u.range!==undefined,true);t.strictEqual(u.country,'JP');t.strictEqual(u.region,'13');t.strictEqual(u.eu,'0');t.strictEqual(u.timezone,'Asia/Tokyo');t.strictEqual(u.city,'Chiyoda-ku');t.ok(u.ll);t.strictEqual(u.metro,0);t.strictEqual(u.area,200)}));it('should match data for IPv4 - PL',(function(){const u=o.lookup('104.113.255.255');t.strictEqual(u.range!==undefined,true);t.strictEqual(u.country,'PL');t.strictEqual(u.region,'14');t.strictEqual(u.eu,'1');t.strictEqual(u.timezone,'Europe/Warsaw');t.strictEqual(u.city,'Warsaw');t.ok(u.ll);t.strictEqual(u.metro,0);t.strictEqual(u.area,20)}));it('should match data for IPv4 - RU',(function(){const u=o.lookup('109.108.63.255');t.strictEqual(u.range!==undefined,true);t.strictEqual(u.country,'RU');t.strictEqual(u.region,'IVA');t.strictEqual(u.eu,'0');t.strictEqual(u.timezone,'Europe/Moscow');t.strictEqual(u.city,'Kineshma');t.ok(u.ll);t.strictEqual(u.metro,0);t.strictEqual(u.area,200)}))}));describe('#testDataIP6()',(function(){it('should match data for IPv6',(function(){const u='2001:1c04:400::1';const n=o.lookup(u);t.strictEqual(n.range!==undefined,true);t.strictEqual(n.country,'NL');t.strictEqual(n.region,'NH');t.strictEqual(n.eu,'1');t.strictEqual(n.timezone,'Europe/Amsterdam');t.strictEqual(n.city,'Zandvoort');t.ok(n.ll);t.strictEqual(n.metro,0);t.strictEqual(n.area,5)}));it('should match data for IPv4 - JP',(function(){const u=o.lookup('2400:8500:1302:814:a163:44:173:238f');t.strictEqual(u.range!==undefined,true);t.strictEqual(u.country,'JP');t.strictEqual(u.region,'');t.strictEqual(u.eu,'0');t.strictEqual(u.timezone,'Asia/Tokyo');t.strictEqual(u.city,'');t.ok(u.ll);t.strictEqual(u.metro,0);t.strictEqual(u.area,500)}));it('should match data for IPv4 - JP',(function(){const u=o.lookup('1.79.255.115');t.strictEqual(u.range!==undefined,true);t.strictEqual(u.country,'JP');t.strictEqual(u.region,'');t.strictEqual(u.eu,'0');t.strictEqual(u.timezone,'Asia/Tokyo');t.strictEqual(u.city,'');t.ok(u.ll);t.strictEqual(u.metro,0);t.strictEqual(u.area,500)}))}));describe('#testUTF8()',(function(){it('should return UTF8 city name',(function(){const u='2.139.175.1';const n='Barbera Del Valles';const c=o.lookup(u);t.ok(c);t.strictEqual(c.city,n)}))}));describe('#testMetro()',(function(){it('should match metro data',(function(){const u=o.lookup('23.240.63.68');t.strictEqual(u.metro,803)}))}));describe('#testIPv4MappedIPv6()',(function(){it('should match IPv4 mapped IPv6 data',(function(){const u=o.lookup('195.16.170.74');t.strictEqual(u.metro,0)}))}));describe('#testSyncReload()',(function(){it('should reload data synchronously',(function(){const u=o.lookup('75.82.117.180');t.notStrictEqual(u,null);const n=o.lookup('::ffff:173.185.182.82');t.notStrictEqual(n,null);o.clear();const c=o.lookup('75.82.117.180');t.strictEqual(c,null);const l=o.lookup('::ffff:173.185.182.82');t.strictEqual(l,null);o.reloadDataSync();const r=o.lookup('75.82.117.180');t.deepStrictEqual(u,r);const a=o.lookup('::ffff:173.185.182.82');t.deepStrictEqual(n,a)}))}));describe('#testAsyncReload()',(function(){it('should reload data asynchronously',(function(u){const n=o.lookup('75.82.117.180');t.notStrictEqual(n,null);const c=o.lookup('::ffff:173.185.182.82');t.notStrictEqual(c,null);o.clear();const l=o.lookup('75.82.117.180');t.strictEqual(l,null);const r=o.lookup('::ffff:173.185.182.82');t.strictEqual(r,null);o.reloadData((function(){const l=o.lookup('75.82.117.180');t.deepStrictEqual(n,l);const r=o.lookup('::ffff:173.185.182.82');t.deepStrictEqual(c,r);u()}))}))}));describe('#testInvalidIP()',(function(){it('should return null for an invalid IP address',(function(){const u='invalid_ip_address';const n=o.lookup(u);t.strictEqual(n,null)}))}));describe('#testEmptyIP()',(function(){it('should return null for an empty IP address',(function(){const u='';const n=o.lookup(u);t.strictEqual(n,null)}))}));describe('#testNullIP()',(function(){it('should return null for a null IP address',(function(){const u=null;const n=o.lookup(u);t.strictEqual(n,null)}))}));describe('#testUnknownIP()',(function(){it('should return null for an unknown IP address',(function(){const u='192.168.1.1';const n=o.lookup(u);t.strictEqual(n,null)}))}));describe('#testNoDataForIP()',(function(){it('should return null for an IP address with no data',(function(){const u='203.0.113.0';const n=o.lookup(u);t.strictEqual(n,null)}))}));describe('#testSpecialCharactersIP()',(function(){it('should return null for an IP address with special characters',(function(){const u='1.2.3.@';const n=o.lookup(u);t.strictEqual(n,null)}))}))}));