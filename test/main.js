const t=require('assert'),o=require('../lib/geoip.js');describe('GeoIP2',(function(){describe('#testLookup()',(function(){it('should return data about IPv4',(function(){const u=o.lookup('1.1.1.1');t.ok(u)})),it('should return data about IPv6',(function(){const u=o.lookup('2606:4700:4700::64');t.ok(u)}))})),describe('#testDataIP4()',(function(){it('should match data for IPv4 - US',(function(){const u=o.lookup('72.229.28.185');t.strictEqual(void 0!==u.range,!0),t.strictEqual(u.country,'US'),t.strictEqual(u.region,'NY'),t.strictEqual(u.eu,'0'),t.strictEqual(u.timezone,'America/New_York'),t.strictEqual(u.city,'New York'),t.ok(u.ll),t.strictEqual(u.metro,501),t.strictEqual(u.area,5)})),it('should match data for IPv4 - JP',(function(){const u=o.lookup('210.138.184.59');t.strictEqual(void 0!==u.range,!0),t.strictEqual(u.country,'JP'),t.strictEqual(u.region,'13'),t.strictEqual(u.eu,'0'),t.strictEqual(u.timezone,'Asia/Tokyo'),t.strictEqual(u.city,'Chiyoda-ku'),t.ok(u.ll),t.strictEqual(u.metro,0),t.strictEqual(u.area,200)})),it('should match data for IPv4 - PL',(function(){const u=o.lookup('104.113.255.255');t.strictEqual(void 0!==u.range,!0),t.strictEqual(u.country,'PL'),t.strictEqual(u.region,'14'),t.strictEqual(u.eu,'1'),t.strictEqual(u.timezone,'Europe/Warsaw'),t.strictEqual(u.city,'Warsaw'),t.ok(u.ll),t.strictEqual(u.metro,0),t.strictEqual(u.area,20)})),it('should match data for IPv4 - RU',(function(){const u=o.lookup('109.108.63.255');t.strictEqual(void 0!==u.range,!0),t.strictEqual(u.country,'RU'),t.strictEqual(u.region,'IVA'),t.strictEqual(u.eu,'0'),t.strictEqual(u.timezone,'Europe/Moscow'),t.strictEqual(u.city,'Kineshma'),t.ok(u.ll),t.strictEqual(u.metro,0),t.strictEqual(u.area,200)}))})),describe('#testDataIP6()',(function(){it('should match data for IPv6',(function(){const u=o.lookup('2001:1c04:400::1');t.strictEqual(void 0!==u.range,!0),t.strictEqual(u.country,'NL'),t.strictEqual(u.region,'NH'),t.strictEqual(u.eu,'1'),t.strictEqual(u.timezone,'Europe/Amsterdam'),t.strictEqual(u.city,'Zandvoort'),t.ok(u.ll),t.strictEqual(u.metro,0),t.strictEqual(u.area,5)})),it('should match data for IPv4 - JP',(function(){const u=o.lookup('2400:8500:1302:814:a163:44:173:238f');t.strictEqual(void 0!==u.range,!0),t.strictEqual(u.country,'JP'),t.strictEqual(u.region,''),t.strictEqual(u.eu,'0'),t.strictEqual(u.timezone,'Asia/Tokyo'),t.strictEqual(u.city,''),t.ok(u.ll),t.strictEqual(u.metro,0),t.strictEqual(u.area,500)})),it('should match data for IPv4 - JP',(function(){const u=o.lookup('1.79.255.115');t.strictEqual(void 0!==u.range,!0),t.strictEqual(u.country,'JP'),t.strictEqual(u.region,''),t.strictEqual(u.eu,'0'),t.strictEqual(u.timezone,'Asia/Tokyo'),t.strictEqual(u.city,''),t.ok(u.ll),t.strictEqual(u.metro,0),t.strictEqual(u.area,500)}))})),describe('#testUTF8()',(function(){it('should return UTF8 city name',(function(){const u=o.lookup('2.139.175.1');t.ok(u),t.strictEqual(u.city,'Barbera Del Valles')}))})),describe('#testMetro()',(function(){it('should match metro data',(function(){const u=o.lookup('23.240.63.68');t.strictEqual(u.metro,803)}))})),describe('#testIPv4MappedIPv6()',(function(){it('should match IPv4 mapped IPv6 data',(function(){const u=o.lookup('195.16.170.74');t.strictEqual(u.metro,0)}))})),describe('#testSyncReload()',(function(){it('should reload data synchronously',(function(){const u=o.lookup('75.82.117.180');t.notStrictEqual(u,null);const l=o.lookup('::ffff:173.185.182.82');t.notStrictEqual(l,null),o.clear();const c=o.lookup('75.82.117.180');t.strictEqual(c,null);const r=o.lookup('::ffff:173.185.182.82');t.strictEqual(r,null),o.reloadDataSync();const a=o.lookup('75.82.117.180');t.deepStrictEqual(u,a);const i=o.lookup('::ffff:173.185.182.82');t.deepStrictEqual(l,i)}))})),describe('#testAsyncReload()',(function(){it('should reload data asynchronously',(function(u){const l=o.lookup('75.82.117.180');t.notStrictEqual(l,null);const c=o.lookup('::ffff:173.185.182.82');t.notStrictEqual(c,null),o.clear();const r=o.lookup('75.82.117.180');t.strictEqual(r,null);const a=o.lookup('::ffff:173.185.182.82');t.strictEqual(a,null),o.reloadData((function(){const r=o.lookup('75.82.117.180');t.deepStrictEqual(l,r);const a=o.lookup('::ffff:173.185.182.82');t.deepStrictEqual(c,a),u()}))}))})),describe('#testInvalidIP()',(function(){it('should return null for an invalid IP address',(function(){const u=o.lookup('invalid_ip_address');t.strictEqual(u,null)}))})),describe('#testEmptyIP()',(function(){it('should return null for an empty IP address',(function(){const u=o.lookup('');t.strictEqual(u,null)}))})),describe('#testNullIP()',(function(){it('should return null for a null IP address',(function(){const u=o.lookup(null);t.strictEqual(u,null)}))})),describe('#testUnknownIP()',(function(){it('should return null for an unknown IP address',(function(){const u=o.lookup('192.168.1.1');t.strictEqual(u,null)}))})),describe('#testNoDataForIP()',(function(){it('should return null for an IP address with no data',(function(){const u=o.lookup('203.0.113.0');t.strictEqual(u,null)}))})),describe('#testSpecialCharactersIP()',(function(){it('should return null for an IP address with special characters',(function(){const u=o.lookup('1.2.3.@');t.strictEqual(u,null)}))}))}));